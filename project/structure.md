# Структура проекта

```
idex/
├── src/                          # Исходный код приложения
│   ├── app/                      # Файлы маршрутизации и страницы Next.js
│   │   ├── admin/                # Административный раздел
│   │   │   ├── users/            # Управление пользователями  
│   │   │   └── page.tsx          # Главная страница админ-панели
│   │   ├── devices/              # Раздел устройств
│   │   │   └── page.tsx          # Страница устройств с поиском и фильтрацией
│   │   ├── profile/              # Раздел профиля пользователя
│   │   │   └── page.tsx          # Страница профиля пользователя
│   │   ├── layout.tsx            # Основной лейаут с HeroUIProvider
│   │   └── page.tsx              # Главная страница
│   ├── components/               # Переиспользуемые компоненты
│   │   ├── navigation.tsx        # Компонент навигации с обработкой аутентификации
│   │   └── ..другие компоненты
│   ├── lib/                      # Вспомогательные библиотеки и утилиты
│   │   ├── stores/               # Хранилища состояния (Zustand)
│   │   │   ├── auth-store.ts     # Хранилище для аутентификации
│   │   │   └── ..другие хранилища
│   │   ├── schemas/              # Схемы данных и валидации
│   │   ├── api/                  # API клиенты и интеграции
│   │   └── utils/                # Вспомогательные функции
│   ├── server/                   # Серверный код
│   │   ├── api/                  # API эндпоинты
│   │   │   ├── routers/          # TRPC роутеры
│   │   │   └── trpc.ts           # Настройка TRPC
│   │   ├── db.ts                 # Настройка базы данных
│   │   └── ..другие серверные файлы
│   ├── styles/                   # Глобальные стили
│   └── ..другие папки и файлы
├── prisma/                       # Схемы и миграции Prisma
├── public/                       # Статические файлы
└── project/                      # Документация проекта
    ├── history.md                # История изменений
    ├── structure.md              # Структура проекта (этот файл)
    ├── tech.md                   # Технологический стек
    └── requests.md               # Архив запросов пользователя

## Описание ключевых компонентов

### app/layout.tsx
Основной шаблон приложения, который оборачивает все страницы. Включает:
- HeroUIProvider для интеграции с библиотекой @heroui/react
- Глобальные стили
- Компонент навигации
- Провайдеры для React Query и других библиотек

### components/navigation.tsx
Навигационный компонент, который отображается на всех страницах. Основные функции:
- Отображение меню навигации для авторизованных и неавторизованных пользователей
- Выпадающее меню пользователя с информацией о балансе
- Модальное окно для пополнения баланса
- Упрощенная структура меню без условной логики для предотвращения ошибок HeroUI
- Адаптивный дизайн для мобильных устройств

### lib/stores/auth-store.ts
Хранилище состояния аутентификации на основе Zustand. Функции:
- Хранение информации о текущем пользователе
- Методы для входа и выхода из системы
- Хранение и обновление токена
- Проверка аутентификации пользователя

### server/api/routers
TRPC роутеры для серверных API эндпоинтов:
- user.ts - эндпоинты для работы с пользователями
- devices.ts - эндпоинты для управления устройствами
- auth.ts - эндпоинты для аутентификации

## Важные технические решения
1. Для аутентификации используется связка JWT + Zustand store
2. Для UI используется библиотека @heroui/react с учетом ограничений в работе коллекций
3. Для серверного API используется tRPC
4. В качестве ORM используется Prisma
5. Стилизация компонентов с использованием Tailwind CSS
6. Типизация с использованием TypeScript для предотвращения ошибок во время компиляции
